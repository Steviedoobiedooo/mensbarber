
<div class="row content-container">
    <div class="col-md-6">
        <div class="mt-4">
            <h3>Reservations</h3>
        </div>
    </div>

    <div class="col-md-3 offset-3 float-right">
        <div class="md-form">
            <input type="text" [(ngModel)]="searchText" class="form-control" id="search" mdbInput>
            <label for="search">Search</label>
        </div>
    </div>
</div>
<table mdbTable #tableEl="mdbTable" class="z-depth-1" small="true">
    <thead class="bg-dark text-light">
        <tr>
            <th *ngFor="let head of headElements; let i = index" scope="col">{{head}}</th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let reservation of reservations; let i = index">
        <th *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex" scope="row"><a type="button">{{reservation.client_id.firstname }} {{ reservation.client_id.middlename }} {{ reservation.client_id.lastname }}</a></th>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex"><a type="button">{{reservation.style_id.name}}</a></td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">{{reservation.reservation_date | date:'shortDate'}}</td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">{{reservation.reservation_date | date:'mediumTime'}}</td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">{{reservation.payment_status}}</td>
        <td *ngIf="i+1 >= mdbTablePagination.firstItemIndex && i < mdbTablePagination.lastItemIndex">
            <button mdbBtn type="button" color="yellow" size="sm" mdbWavesEffect (click)="editModal.show(); editReservation(reservation._id)">
                <mdb-icon fas icon="pen" class="mr-1"></mdb-icon>Edit
            </button>
            <button mdbBtn type="button" color="danger" size="sm" mdbWavesEffect (click)="deleteReservation(reservation._id)">
                <mdb-icon fas icon="trash" class="mr-1"></mdb-icon>Delete
            </button>
        </td>
        </tr>
    </tbody>
    <tfoot class="grey lighten-5 w-100">
        <tr>
            <td colspan="12">
            <mdb-table-pagination [tableEl]="tableEl" [searchDataSource]="reservations"></mdb-table-pagination>
        </td>
        </tr>
    </tfoot>
</table>


<!-- Modals -->

<!-- Edit Modal -->
<div  style="overflow-y: auto" mdbModal #editModal="mdbModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="editModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg" role="document">
            <div class="modal-content">
                <div class="modal-header bg-amber">
                    <h5 class="modal-title" id="editModalLabel">Edit Reservation</h5>
                    <button type="button" class="close text-dark" (click)="editModal.hide()" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
        
                <div class="modal-body p-5">
                    <form (submit)="updateReservation()" #updateForm="ngForm">
                            <label for="editStyle" class="">Style</label>
                            <select class="form-control" [(ngModel)]="editStyle" name="editStyle">
                                <option *ngFor="let row of styles" [value]="row._id" [selected]="row._id == style._id">{{ row.name }}</option>
                            </select>
                            
                            <label for="bookingdate" class="mt-3">Date and Time</label>
                                <div class="row mt-3">
                                    <div class="col-lg-2">
                                        Cur. Date:
                                    </div>
                                    <div class="col-lg-4">
                                        <input class="form-control" value="{{ reservation.reservation_date | date:'shortDate' }}" disabled>
                                    </div>

                                    <div class="col-lg-2">
                                        New Date:
                                    </div>
                                    <div class="col-lg-4">
                                        <input mdbInput type="date" #newdate="ngModel" [(ngModel)]="newbookingdate" name="newbookingdate" class="form-control" required>
                                    </div>
                                </div>
                            
                                <div class="row mt-3">
                                    <div class="col-lg-2">
                                        Cur. Time:
                                    </div>
                                    <div class="col-lg-4">
                                        <input class="form-control" value="{{ reservation.reservation_date | date:'mediumTime' }}" disabled>
                                    </div>

                                    <div class="col-lg-2">
                                        New Time:
                                    </div>
                                    <div class="col-lg-4">
                                            <input mdbInput type="time" #newtime="ngModel" [(ngModel)]="newbookingtime" name ="newbookingtime" class="form-control" required/>
                                    </div>
                                </div>
                            

                            <button id="updateBtn" class="btn btn-block btn-sm bg-amber text-light mt-3" type="submit" [disabled]="updateForm.invalid">Save</button>
      
                    </form>
                    
                </div>
            </div>
        </div>
    </div>